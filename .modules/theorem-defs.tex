% Assuming that the theorem style is already set (e.g., `\theoremstyle{it}`)

\newtheorem{theorem}{Theorem}
\newtheorem*{theorem*}{Theorem}
\BeforeBeginEnvironment{theorem}{\goodbreak}
\BeforeBeginEnvironment{theorem*}{\goodbreak}
% The use of `\goodbreak` works around incorrect page-based numbering. See
% <https://texfaq.org/FAQ-wrongpn> and <https://tex.stackexchange.com/a/88186>.

\newcommand{\newthm}[2]{
    % Here we abuse the argument `#1`. Treating it both as the environment name
    % and the lowercase reference name.
    \newtheorem{#1}[theorem]{#2}
    \newtheorem*{#1*}{#2}
    \BeforeBeginEnvironment{#1}{\goodbreak}
    \BeforeBeginEnvironment{#1*}{\goodbreak}
    \zcRefTypeSetup{#1}{name-sg=#1,Name-sg=#2}
    \AddToHook{env/#1/begin}{\zcsetup{countertype={theorem=#1}}}
}

\newthm{proposition}{Proposition}
\newthm{lemma}{Lemma}
\newthm{corollary}{Corollary}

\newthm{assumption}{Assumption}
\newthm{claim}{Claim}
\newthm{definition}{Definition}
\newthm{example}{Example}
\newthm{remark}{Remark}
