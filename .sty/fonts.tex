% For compatibility and convenience, load OpenType fonts with dedicated
% packages whenever possible. (XeTeX on macOS cannot find fonts in the TEXMF
% tree by font family name, and loading fonts by file name requires specifying
% variants explicitly.)

\ifpdftex
    % New PX (serif, main font)
    \usepackage{newpxtext}

    % New PX (math)
    \usepackage{newpxmath}
\else
    % TeX Gyre Pagella (serif, main font)
    \usepackage{pagella-otf} % also sets the math font

    % Fira Sans (sans-serif)
    % \usepackage{FiraSans} % commented for faster compilation

    % Fira Mono (monospace)
    \usepackage[scale=.9, nomap]{FiraMono}

    % TeX Gyre Pagella Math (math)
    \setmathfont[
        AutoFakeBold
    ]{texgyrepagella-math.otf}

    % Latin Modern Math for symbols (math)
    \setmathfont[
    AutoFakeBold,
    range={\mathop,\mathbin,\mathrel,\sqrt,cal/{Latin}}
    ]{latinmodern-math.otf}

    % Neither Pagella nor Latin Modern has `\setminus`. See
    % <https://tex.stackexchange.com/a/140343>.
    \AtBeginDocument{
        \renewcommand{\setminus}{\mathbin{\backslash}}%
    }
\fi
