% Load OpenType fonts with dedicated packages whenever possibler(XeTeX on macOS
% cannot find fonts in the TEXMF tree by font family name, and loading fonts by
% file name requires specifying variants and features explicitly.)
%
% To find the file name of a font, look in
% `/usr/local/texlive/<version>/texmf-dist/fonts/opentype/public`'

\ifpdftex
    % New PX (serif)
    \usepackage{newpxtext}

    % New PX (math)
    \usepackage{newpxmath}
\else
    % TeX Gyre Pagella (serif)
    \usepackage{pagella-otf}

    % Fira Sans (sans-serif)
    % \usepackage{FiraSans} % commented for faster compilation

    % Fira Mono (monospace)
    \usepackage[scale=.9, nomap]{FiraMono}

    % TeX Gyre Pagella (math)
    \setmathfont[
        AutoFakeBold,
    ]{texgyrepagella-math.otf}
    % Technically this is already loaded by package `pagella-otf`.

    % Asana Math (math, select symbols)
    \setmathfont[
        AutoFakeBold,
        range=\mitf,
    ]{Asana-Math.otf}
    % Asana has better kerning around letter `f`.

    % Map letter `f` to `\mitf` in math mode
    \begingroup\lccode`~=`f \lowercase{\endgroup\def~}{\mitf}
    \mathcode`f="8000
    % From <https://tex.stackexchange.com/a/530981>

    % New Computer Modern (math, select symbols)
    \setmathfont[
        AutoFakeBold,
        CharacterVariant=1, % variant empty set symbol
        range={\mathop,\mathbin,\mathrel,\sqrt,\mathcal,\varnothing},
    ]{NewCMMath-Book.otf} % book weight
\fi
