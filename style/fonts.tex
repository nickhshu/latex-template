% -----------------------------------------------------------------------------
% Package `unicode-math`
\usepackage[
    math-style=ISO, bold-style=ISO,
    partial=upright,
    mathrm=sym, mathit=sym, mathsf=sym, mathbf=sym, mathtt=sym,
    warnings-off={mathtools-colon,mathtools-overbracket},
]{unicode-math}

% -----------------------------------------------------------------------------
% Main text font (Palatine Parliamentary)

% Palatine Parliamentary is a recreation of Book Antiqua Parliamentary made by
% Elijah Granet. Both are mainly Palatino, except that they use Times Roman
% for single and double quotation marks.
%
% The font is not included in TeX Live. OTF files are included. Install them to
% the system so that XeTeX or LuaTeX can find them.

% The following selection code borrows from package `pagella-otf`
\setmainfont{PalatineP}[
    UprightFont = *-Regular,
    ItalicFont = *-Italic,
    ItalicFeatures = { SmallCapsFont = *-Italic },
    SlantedFont = *-Regular,
    SlantedFeatures = { FakeSlant = 0.2 },
    BoldFont = *-Bold,
    BoldFeatures = { SmallCapsFont = *-Bold },
    BoldItalicFont = *-Bolditalic,
    BoldItalicFeatures = { SmallCapsFont = *-BoldItalic },
    BoldSlantedFont = *-Bold,
    BoldSlantedFeatures = {
            FakeSlant = 0.2,
            SmallCapsFont = *-Bold
        },
    SmallCapsFont = *-Regular,
    SmallCapsFeatures ={ Letters = SmallCaps },
    Extension = .otf
]

% Alternatively, simply use TeX Gyre Pagella (this also sets the math font)
% \usepackage{pagella-otf}

% -----------------------------------------------------------------------------
% Math fonts

% TeX Gyre Pagella, but ...
\setmathfont[
    AutoFakeBold
]{texgyrepagella-math.otf}

% ... use Latin Modern for symbols
\setmathfont[
    AutoFakeBold,
    range={\mathop,\mathbin,\mathrel,\mathcal,\sqrt}
]{latinmodern-math.otf}

% Neither Pagella nor Latin Modern has `\setminus`. Weird bug.
% See <https://tex.stackexchange.com/a/140343>.
\AtBeginDocument{
    \renewcommand{\setminus}{\mathbin{\backslash}}%
}

% -----------------------------------------------------------------------------
% Sans-serif font (Fira Sans)
% \usepackage{FiraSans} % commented by default to speed up compilation

% -----------------------------------------------------------------------------
% Monospace font (Fira Mono)
\usepackage[scale=.8, nomap]{FiraMono}
